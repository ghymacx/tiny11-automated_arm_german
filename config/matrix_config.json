{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Tiny11 Version Matrix Configuration",
  "description": "Configuration and tracking schema for automated Windows release detection",
  "version": "1.0.0",
  "author": "kelexine (https://github.com/kelexine)",
  "config": {
    "monitoring": {
      "enabled": true,
      "check_interval_hours": 24,
      "force_check_on_manual_trigger": true,
      "sources": {
        "uupdump": {
          "enabled": true,
          "api_url": "https://api.uupdump.net",
          "timeout_seconds": 30,
          "max_results": 30,
          "architectures": [
            "arm64"
          ],
          "languages": [
            "de-de"
          ]
        },
        "microsoft_direct": {
          "enabled": true,
          "method": "playwright",
          "note": "Direct ISO links via Playwright browser automation - PRIMARY SOURCE"
        },
        "github_mirrors": {
          "enabled": false,
          "repos": [],
          "note": "Monitor community Windows ISO mirrors"
        }
      }
    },
    "filtering": {
      "windows_versions": [
        "24H2",
        "25H2",
        "26H2"
      ],
      "exclude_insider": false,
      "exclude_canary": true,
      "min_build_number": 22000,
      "architectures": [
        "arm64"
      ],
      "languages": [
        "de-de"
      ]
    },
    "build_triggers": {
      "auto_trigger_enabled": true,
      "trigger_on_detection": true,
      "delay_minutes": 5,
      "build_types": {
        "standard": {
          "enabled": true,
          "workflow": "build-tiny11.yml",
          "editions": [
            1,
            6
          ],
          "priority": 1
        },
        "core": {
          "enabled": true,
          "workflow": "build-tiny11-core.yml",
          "editions": [
            1,
            6
          ],
          "priority": 2,
          "enable_dotnet35": false
        },
        "nano": {
          "enabled": true,
          "workflow": "build-nano11.yml",
          "editions": [
            1,
            6
          ],
          "priority": 3
        }
      }
    },
    "notifications": {
      "github_issues": {
        "enabled": true,
        "auto_create": true,
        "labels": [
          "automated",
          "new-release",
          "build-pending"
        ],
        "assignees": []
      },
      "discord": {
        "enabled": false,
        "webhook_url_secret": "DISCORD_WEBHOOK",
        "mention_role_id": null
      },
      "slack": {
        "enabled": false,
        "webhook_url_secret": "SLACK_WEBHOOK",
        "channel": "#tiny11-releases"
      },
      "email": {
        "enabled": false,
        "smtp_server": "smtp.gmail.com",
        "smtp_port": 587,
        "recipients": []
      }
    },
    "distribution": {
      "sourceforge": {
        "enabled": false,
        "auto_upload": false,
        "project_name": "tiny-11-releases",
        "api_key_secret": "SOURCEFORGE_API_KEY"
      },
      "github_releases": {
        "enabled": true,
        "create_draft": true,
        "attach_checksums": true
      }
    },
    "testing": {
      "auto_test_enabled": false,
      "vm_platforms": [
        "virtualbox",
        "vmware",
        "hyperv"
      ],
      "test_suites": [
        "boot",
        "install",
        "basic_functionality"
      ],
      "test_timeout_minutes": 60
    }
  },
  "tracking_schema": {
    "type": "object",
    "properties": {
      "builds": {
        "type": "object",
        "description": "Map of build_id to release information",
        "additionalProperties": {
          "type": "object",
          "properties": {
            "build_id": {
              "type": "string",
              "description": "Unique identifier for this build"
            },
            "build_number": {
              "type": "string",
              "description": "Windows build number (e.g., 26100)"
            },
            "version": {
              "type": "string",
              "description": "Marketing version (e.g., 24H2, 25H2)"
            },
            "title": {
              "type": "string",
              "description": "Full release title"
            },
            "iso_url": {
              "type": "string",
              "format": "uri",
              "description": "Download URL for ISO"
            },
            "detected_date": {
              "type": "string",
              "format": "date-time",
              "description": "ISO 8601 timestamp when detected"
            },
            "architecture": {
              "type": "string",
              "enum": [
                "arm64"
              ],
              "description": "CPU architecture"
            },
            "channel": {
              "type": "string",
              "enum": [
                "retail",
                "insider",
                "canary"
              ],
              "description": "Release channel"
            },
            "language": {
              "type": "string",
              "default": "de-de",
              "description": "ISO language"
            },
            "checksum_sha256": {
              "type": [
                "string",
                "null"
              ],
              "description": "SHA256 hash if available"
            },
            "size_bytes": {
              "type": [
                "integer",
                "null"
              ],
              "description": "ISO size in bytes"
            },
            "builds_triggered": {
              "type": "object",
              "description": "Track which builds were triggered",
              "properties": {
                "standard": {
                  "type": "boolean"
                },
                "core": {
                  "type": "boolean"
                },
                "nano": {
                  "type": "boolean"
                }
              }
            },
            "builds_completed": {
              "type": "object",
              "description": "Track which builds completed successfully",
              "properties": {
                "standard": {
                  "type": "boolean"
                },
                "core": {
                  "type": "boolean"
                },
                "nano": {
                  "type": "boolean"
                }
              }
            }
          },
          "required": [
            "build_id",
            "build_number",
            "version",
            "title",
            "iso_url",
            "detected_date",
            "architecture"
          ]
        }
      },
      "last_check": {
        "type": [
          "string",
          "null"
        ],
        "format": "date-time",
        "description": "Last time releases were checked"
      },
      "check_count": {
        "type": "integer",
        "description": "Total number of checks performed",
        "minimum": 0
      },
      "metadata": {
        "type": "object",
        "properties": {
          "version": {
            "type": "string",
            "description": "Schema version"
          },
          "created": {
            "type": "string",
            "format": "date-time"
          },
          "updated": {
            "type": "string",
            "format": "date-time"
          }
        }
      }
    },
    "required": [
      "builds",
      "last_check",
      "check_count"
    ]
  },
  "example_tracking_data": {
    "builds": {
      "abc123-def456": {
        "build_id": "abc123-def456",
        "build_number": "26100",
        "version": "24H2",
        "title": "Windows 11 Professional 24H2 Build 26100",
        "iso_url": "https://uupdump.net/download.php?id=abc123-def456&pack=en-us&edition=professional",
        "detected_date": "2025-12-21T09:26:00Z",
        "architecture": "arm64",
        "channel": "retail",
        "language": "de-de",
        "checksum_sha256": null,
        "size_bytes": null,
        "builds_triggered": {
          "standard": true,
          "core": true,
          "nano": true
        },
        "builds_completed": {
          "standard": true,
          "core": true,
          "nano": false
        }
      }
    },
    "last_check": "2025-12-21T09:26:00Z",
    "check_count": 42,
    "metadata": {
      "version": "1.0.0",
      "created": "2025-12-01T00:00:00Z",
      "updated": "2025-12-21T09:26:00Z"
    }
  },
  "github_actions_outputs": {
    "description": "Expected outputs for GitHub Actions integration",
    "outputs": {
      "has_new": {
        "type": "string",
        "enum": [
          "true",
          "false"
        ],
        "description": "Whether new releases were detected"
      },
      "new_releases": {
        "type": "string",
        "description": "JSON array of new release objects"
      },
      "releases_matrix": {
        "type": "string",
        "description": "JSON object for GitHub Actions matrix strategy"
      }
    }
  },
  "notes": {
    "author": "kelexine",
    "github": "https://github.com/kelexine/tiny11-automated",
    "purpose": "Automate detection and building of Tiny11 variants for new Windows releases",
    "license": "MIT"
  }
}
